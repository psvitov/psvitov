# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

---
### Ответ:
---


Согласно вводным данным посчитаем необходимые ресурсы:

RAM:

- 12 Гб - БД
- 12 Гб - Кэш
- 250 Мб - Фронтенд
- 6 Гб - Бекенд

CPU:

 - 3 ядра - БД
 - 3 ядра - Кэш
 - 1 ядро - Фронтенд
 - 10 ядер - Бекенд

По требованиям отказоустойчивость требуется только на БД и Кэш, для них нужно не менее 3 нод, Фронтенд и бекенд, лучше так же распределить по 3 нодам, но отдельно не выделяя ресурсы на отказоустойчивость, а лучше выделить им отдельно 2 ноды.

Оптимальный вариант:
```
3 ноды для БД и Кэш с одинаковыми ресурсами: 12 Гб RAM, 3 CPU - на каждую ноду
2 ноды для фронт- и бекенда с одинаковыми ресурсами: 7 Гб RAM, 11 CPU на каждую ноду
```

Минимальный вариант:

```
3 ноды для всего с одинаковыми ресурсами: 16 Гб RAM, 12 CPU
```

Так же протребуется мастер-нода для управления кластером, минимальные требования 2Гб RAM, 2 CPU, но лучше взять помощнее - 8 Гб RAM, 4 CPU

В задании ничего не написано про дисковое пространство. 

Потребуется следующее дисковое пространство на каждую ноду (приблизительно, так как БД может разрастись):
 - 30 Гб - БД
 - 30 Гб - Кэш
 - 2 Гб - фронтенд
 - 8 Гб - Бекенд
 - 10 Гб - Мастер-нода

Для реализации мониторинга и логирования кластера лучше всего выделить 2 виртуальные машины с параметрами: 4 Гб RAM, 4 CPU, 20 Гб Disk на каждую ВМ.

#### Итоговый подсчет с учетом запаса ресурсов в 20%:

 - RAM - 64 Гб
 - CPU - 43 ядра
 - Disk - 250 Гб
